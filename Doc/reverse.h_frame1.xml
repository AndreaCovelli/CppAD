<?xml version='1.0'?>
<?xml-stylesheet type='text/xsl' href='pmathml.xsl'?>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>Reverse Mode: Example and Test</title>
<meta name="description" content="Reverse Mode: Example and Test"/>
<meta name="keywords" content=" Reverse example test "/><style type='text/css'>
BODY { color : black }
BODY { background-color : white }
</style>
</head>
<body>
<div align='right'><a href="reverse.xml" target="_top">previous</a>
&#xA0;&#xA0;<a href="hestimesdir.cpp.xml" target="_top">next</a>
&#xA0;&#xA0;<a href="_contents.xml" target="_top">contents</a>
&#xA0;&#xA0;<a href="_reference.xml" target="_top">reference</a>
&#xA0;&#xA0;<a href="_index.xml" target="_top">index</a>
&#xA0;&#xA0;<a href="_search.xml" target="_top">search</a>
&#xA0;&#xA0;<a href="_external.xml" target="_top">external</a>
&#xA0;&#xA0;This:&#xA0;&#xA0;<a href="reverse.h.xml" target="_top">section</a>, <a href="reverse.h_frame1.xml" target="_top">frame</a></div>
<hr/>


<center><b><big><big>Reverse Mode: Example and Test</big></big></b></center>
<code><font color="blue"><span style='white-space: nowrap'><br/>
<br/>
#&#xA0;include&#xA0;&lt;CppAD/CppAD.h&gt;<br/>
<br/>
template&#xA0;&lt;typename&#xA0;VectorDouble&gt;&#xA0;//&#xA0;vector&#xA0;class,&#xA0;elements&#xA0;of&#xA0;type&#xA0;double<br/>
bool&#xA0;Reverse(void)<br/>
{&#xA0;&#xA0;&#xA0;&#xA0;bool&#xA0;ok&#xA0;=&#xA0;true;<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;using&#xA0;namespace&#xA0;CppAD;<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;independent&#xA0;variable&#xA0;vector&#xA0;<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CppADvector&lt;&#xA0;AD&lt;double&gt;&#xA0;&gt;&#xA0;X(2);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;X[0]&#xA0;=&#xA0;0.;&#xA0;<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;X[1]&#xA0;=&#xA0;1.;<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;Independent(X);<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;compute&#xA0;product&#xA0;of&#xA0;elements&#xA0;in&#xA0;X<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CppADvector&lt;&#xA0;AD&lt;double&gt;&#xA0;&gt;&#xA0;Y(1);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;Y[0]&#xA0;=&#xA0;X[0]&#xA0;*&#xA0;X[0]&#xA0;*&#xA0;X[1];<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;create&#xA0;function&#xA0;object&#xA0;F&#xA0;:&#xA0;X&#xA0;-&gt;&#xA0;Y<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;ADFun&lt;double&gt;&#xA0;F(X,&#xA0;Y);<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;use&#xA0;zero&#xA0;order&#xA0;forward&#xA0;mode&#xA0;to&#xA0;evaluate&#xA0;F[&#xA0;(3,&#xA0;4)&#xA0;]&#xA0;<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;VectorDouble&#xA0;x0(&#xA0;F.Domain()&#xA0;);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;VectorDouble&#xA0;y0(&#xA0;F.Range()&#xA0;);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;x0[0]&#xA0;&#xA0;&#xA0;&#xA0;=&#xA0;3.;<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;x0[1]&#xA0;&#xA0;&#xA0;&#xA0;=&#xA0;4.;<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;y0&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;=&#xA0;F.Forward(0,&#xA0;x0);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;ok&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&amp;=&#xA0;NearEqual(y0[0]&#xA0;,&#xA0;x0[0]*x0[0]*x0[1],&#xA0;1e-10,&#xA0;1e-10);<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;use&#xA0;first&#xA0;order&#xA0;reverse&#xA0;mode&#xA0;to&#xA0;evaluate&#xA0;partials&#xA0;of&#xA0;F&#xA0;w.r.t&#xA0;X[j]<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;VectorDouble&#xA0;w(&#xA0;F.Range()&#xA0;);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;VectorDouble&#xA0;dw1(&#xA0;F.Domain()&#xA0;);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;w[0]&#xA0;=&#xA0;1.;<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;dw1&#xA0;&#xA0;=&#xA0;F.Reverse(1,&#xA0;w);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;ok&#xA0;&#xA0;&amp;=&#xA0;NearEqual(dw1[0]&#xA0;,&#xA0;2.*x0[0]*x0[1],&#xA0;1e-10,&#xA0;1e-10);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;ok&#xA0;&#xA0;&amp;=&#xA0;NearEqual(dw1[1]&#xA0;,&#xA0;x0[0]*x0[0],&#xA0;1e-10,&#xA0;1e-10);<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;apply&#xA0;first&#xA0;order&#xA0;forward&#xA0;mode&#xA0;in&#xA0;X[0]&#xA0;direction<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;(note&#xA0;all&#xA0;second&#xA0;order&#xA0;partials&#xA0;below&#xA0;involve&#xA0;X[0])<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;VectorDouble&#xA0;x1(&#xA0;F.Domain()&#xA0;);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;VectorDouble&#xA0;y1(&#xA0;F.Range()&#xA0;);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;x1[0]&#xA0;=&#xA0;1.;<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;x1[1]&#xA0;=&#xA0;0.;<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;y1&#xA0;&#xA0;&#xA0;&#xA0;=&#xA0;F.Forward(1,&#xA0;x1);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;ok&#xA0;&#xA0;&#xA0;&amp;=&#xA0;NearEqual(y1[0],&#xA0;2.*x0[0]*x0[1],&#xA0;1e-10,&#xA0;1e-10);<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;user&#xA0;second&#xA0;order&#xA0;reverse&#xA0;mode&#xA0;to&#xA0;evalaute&#xA0;second&#xA0;partials&#xA0;of&#xA0;F<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;with&#xA0;respect&#xA0;to&#xA0;X[j]&#xA0;&amp;&#xA0;X[0]<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;VectorDouble&#xA0;dw2(&#xA0;2&#xA0;*&#xA0;F.Domain()&#xA0;&#xA0;);<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;dw2&#xA0;&#xA0;=&#xA0;F.Reverse(2,&#xA0;w);<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;check&#xA0;partial&#xA0;of&#xA0;F&#xA0;w.r.t.&#xA0;X[0]<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;ok&#xA0;&#xA0;&amp;=&#xA0;NearEqual(dw2[0&#xA0;*&#xA0;2&#xA0;+&#xA0;0]&#xA0;,&#xA0;2.*x0[0]*x0[1],&#xA0;1e-10,&#xA0;1e-10);<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;check&#xA0;partial&#xA0;of&#xA0;F&#xA0;w.r.t&#xA0;X[0]&#xA0;&amp;&#xA0;X[0]<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;ok&#xA0;&#xA0;&amp;=&#xA0;NearEqual(dw2[0&#xA0;*&#xA0;2&#xA0;+&#xA0;1]&#xA0;,&#xA0;2.*x0[1],&#xA0;1e-10,&#xA0;1e-10);&#xA0;<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;check&#xA0;partial&#xA0;of&#xA0;F&#xA0;w.r.t.&#xA0;X[1]<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;ok&#xA0;&#xA0;&amp;=&#xA0;NearEqual(dw2[1&#xA0;*&#xA0;2&#xA0;+&#xA0;0]&#xA0;,&#xA0;x0[0]*x0[0],&#xA0;1e-10,&#xA0;1e-10);<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;check&#xA0;partial&#xA0;of&#xA0;F&#xA0;w.r.t&#xA0;X[1]&#xA0;&amp;&#xA0;X[0]<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;ok&#xA0;&#xA0;&amp;=&#xA0;NearEqual(dw2[1&#xA0;*&#xA0;2&#xA0;+&#xA0;1]&#xA0;,&#xA0;2.*x0[0],&#xA0;1e-10,&#xA0;1e-10);&#xA0;<br/>
<br/>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;return&#xA0;ok;<br/>
}<br/>
</span></font></code>
<hr/>Input File: Example\Reverse.h

</body>
</html>
